<!DOCTYPE html>
<html lang="pt">
<title>Colisao</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<body ng-app="app">

<div ng-include="'app/views/menu.html'" ng-controller="meuTeste" id="mySidebar"></div>

<header class="navbar navbar-default"  id="mySidebar" style="background:#ffce54">
  <div class="text-center">
    <img class="img-circle img" src="../registro/img/logoColisao.png" alt="Logo Colisao" >
  </div>
</header>

<div ng-view class="container" ></div>

<footer>
<!--
  Pesquisar como fazer um menu rolante usando a classe touch-action do css e javascript
  <nav class="touch">  
    <ul class="">
    <li routerLinkActive="" class="" >
        <a href="#/home" class="" onclick="closeSidebar()"><i class="fa fa-home fa-2x" arial-hidden="true"></i>
          <div><strong>HOME</strong></div>
        </a>
      </li>
      <li routerLinkActive="" class="" >
        <a href="#/home" class="" onclick="closeSidebar()"><i class="fa fa-home fa-2x" arial-hidden="true"></i>
          <div><strong>HOME</strong></div>
        </a>
      </li>
      <li routerLinkActive="" class="" >
        <a href="#/home" class="" onclick="closeSidebar()"><i class="fa fa-home fa-2x" arial-hidden="true"></i>
          <div><strong>HOME</strong></div>
        </a>
      </li>
    <li routerLinkActive="" class="" >
        <a href="#/home" class="" onclick="closeSidebar()"><i class="fa fa-home fa-2x" arial-hidden="true"></i>
          <div><strong>HOME</strong></div>
        </a>
      </li>
    <li routerLinkActive="" class="" >
        <a href="#/home" class="" onclick="closeSidebar()"><i class="fa fa-home fa-2x" arial-hidden="true"></i>
          <div><strong>HOME</strong></div>
        </a>
      </li>
    <li routerLinkActive="" class="" >
        <a href="#/home" class="" onclick="closeSidebar()"><i class="fa fa-home fa-2x" arial-hidden="true"></i>
          <div><strong>HOME</strong></div>
        </a>
      </li>
    
    
</nav>
-->
  <nav>  
    <ul class="nav navbar-fixed-bottom " style="background: #ffce54;">     
      <li routerLinkActive="active" class="text-center" >
        <a href="#/home" class="col-xs-4" onclick="closeSidebar()"><i class="fa fa-home fa-2x" arial-hidden="true"></i>
          <div><strong>HOME</strong></div>
        </a>
      </li>
      <li routerLinkActive="active" class="text-center">
        <a href="#/bid" class="col-xs-4" onclick="closeSidebar()"><i class="fa fa-futbol-o fa-2x" arial-hidden="true"></i>
          <div><strong>BID</strong></div>
          </a>
        </li>
        <li *ngIf="admPermissao" routerLinkActive="active" class="text-center"> 
            <a href="#/mensalidade" class="col-xs-4" onclick="openSidebar()">
            <i class="fa fa-money fa-2x"></i>
            <div><strong>MENSALIDADE</strong></div>
          </a>
        </li>
      </ul>  
</nav>
  
</footer>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.8/angular.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular-route.min.js"></script>
  <script src="app/app.js"></script>
  <script src="app/controller/controllers.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script>
closeSidebar();
function openSidebar() {
    document.getElementById("mySidebar").style.display = "block";
}
function closeSidebar() {
    document.getElementById("mySidebar").style.display = "none";
}


var faltam = '';
// funcÃ§ao que inicializa o contador
function atualizaContador() 
{  
  /*var dataHoje = document.getElementById("data-jogo").value;
  */

  var pegaData; 
  url = "atualizaData.php";
  $.ajax({
      url:url,
      type:'POST',
      dataType:'JSON',  
      success:function(data)
      {
        //console.log(data);  
  var dataFutura = data.dataBid;
  //data do dia para ser comparada com a data futura  
  //console.log("data futura" + dataFutura);
  var hoje = new Date(data.dataAtual);
  var hojeTime = hoje.getTime();
  //data que sera comparada  
  var futuro = new Date(dataFutura);
  //passa o segundos,milisegundos, hora, dia para inteiro
  id = data.id_partida;
  console.log('Hotatio de agora' + hojeTime)
  if(hojeTime > 0){

    var tempo = setInterval(function(){

      var ss = parseInt((futuro - hojeTime) / 1000);
      //minutos
      var mm = parseInt(ss / 60);  
      //horas
      var hh = parseInt(mm / 60);  
      //dias
      var dd = parseInt(hh / 24);   

      ss = ss - (mm * 60);  
      mm = mm - (hh * 60);  
      hh = hh - (dd * 24);   

      faltam = 'Encerramento do Bid ';  
      faltam += (dd && dd > 1) ? dd+' dias, ' : (dd==1 ? '1 dia, ' : '');  
      faltam += (toString(hh).length) ? hh+' hr, ' : '';  
      faltam += (toString(mm).length) ? mm+' min e ' : '';  
      faltam += ss+' seg';   

      if (dd+hh+mm+ss > 0) 
      {
        document.getElementById('contador').innerHTML = faltam; 
        document.getElementById('meuTeste').style.display = 'block'; 
          hojeTime = hojeTime  + 1000;
          /*chama os jogadores do colisao*/
      }
      else
      {
          document.getElementById('contador').innerHTML = 'BID ENCERRADO!!!'; 
          document.getElementById('contador').style.background = 'red'; 
          document.getElementById('meuTeste').style.display = 'none'; 
        clearInterval(tempo);
        

      }
    },1000)
  }
      },
      error:function(error)
      {
        console.log("Erro no ajax" + error);
      }
  });

        /*url = 'chamaJogadorBid.php';
          $.ajax({
            url: url,
            type: 'POST',
            dataType: 'JSON',
            data: {param1: 'value1'},
          })
          .done(function(data) {
           // console.log(data);            
          })
          .fail(function() {
            //console.log("error");
          })
          .always(function() {
            //console.log("complete");
          });
       */
          
      /*    var xhttp = new XMLHttpRequest();
          xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
          
            console.log(this.responseText);
            }
          };
          xhttp.open("GET", url, true);
          xhttp.send();
        */        
  
}

/*function cadastraJogador(){
  url = "cadastraJogador.php";
    //console.log(url);
  
    $.ajax({
      url:url,
      type:'POST',
      dataType:'JSON',   
      success:function(data)
      {
          if (data.enviado == true){              
              console.log("CAsdatrodo com sucesso Jogadores");              
          }else{
            console.log("data encerrada jogadores");
          }             
      },
      error:function(error)
      {
        console.log("Erro no ajax" + error);
      }
  });
}*/
</script>
</body>